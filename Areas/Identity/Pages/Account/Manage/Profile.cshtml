@page
@model ProfileModel
@{
    ViewData["Title"] = "Quản lý cá nhân";
}
<div class="container ">
    <div class="card shadow-sm p-4 mx-auto position-relative" >

        <div class="position-absolute top-0 end-0 mt-2 me-2">
            <div class="dropdown">
                <button class="btn  border-0" type="button" data-bs-toggle="dropdown">
                    <i class="bi bi-three-dots-vertical "></i>
                </button>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item" asp-page="Index"><i class="bi bi-pencil-square me-2"></i>Chỉnh sửa thông tin</a></li>
                    <li><a class="dropdown-item" asp-page="ChangePassword"><i class="bi bi-lock-fill me-2"></i>Đổi mật khẩu</a></li>
                    <li><a class="dropdown-item text-danger" asp-page="Logout"><i class="bi bi-box-arrow-right me-2"></i>Đăng xuất</a></li>
                </ul>
            </div>
        </div>
        <div class="text-center mt-4">
            <img src="@Url.Content(@Model.AvatarUrl)" class="rounded-circle img-thumbnail" width="150" height="150" alt="Avatar">
            <h4 class="mt-3">@Model.DisplayName</h4>
        </div>
        <h4 class="text-secondary text-center mt-4">Lịch sử chơi</h4>
        <table class="table table-bordered table-striped mt-3">
            <thead class="table-primary">
                <tr>
                    <th>#</th>
                    <th>Quiz</th>
                    <th>Điểm</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.QuizHistory.Any())
                {
                    int index = 1;
                    @foreach (var quiz in Model.QuizHistory)
                    {
                        <tr>
                            <td>@index</td>
                            <td>@quiz.QuizName</td>
                            <td>@quiz.Score</td>
                        </tr>
                        index++;
                    }
                }
                else
                {
                    <tr>
                        <td colspan="3" class="text-center text-muted">Chưa có dữ liệu</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            console.log("Trang cá nhân đã tải!");
        });
    </script>
}
